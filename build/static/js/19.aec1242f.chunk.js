(this["webpackJsonpFleek-Admin-Portal"]=this["webpackJsonpFleek-Admin-Portal"]||[]).push([[19],{1698:function(e,t,a){"use strict";a.r(t);var n=a(126),i=a(127),r=a(288),s=a(129),c=a(128),l=a(0),o=a.n(l),d=a(953),u=a(959),m=a(136),v=a(436),h=a(1031),_=a(1032),g=a(1148),f=a(1355),y=a(1734),p=a(1738),E=a(105),b=a(1088),S=a.n(b),C=a(287),w=d.a.Option,k=u.a.TextArea,M=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={categories_data:[],sub_categories_data:[],services_data:[],is_sub_cat:!1,is_services:!1,isLoading:!0,viewEditModal:!1,viewDeleteModal:!1,viewAddModal:!1,service_id:"",service_name:"",service_description:"",new_service_name:"",new_service_description:""},i.handleCategoryChange=i.handleCategoryChange.bind(Object(r.a)(i)),i.handleSubCategoryChange=i.handleSubCategoryChange.bind(Object(r.a)(i)),i.columns=[{title:"Name",dataIndex:"service_name",key:"service_name"},{title:"Description",dataIndex:"service_description",key:"service_description"},{title:"Edit",dataIndex:"",key:"x",render:function(e){return o.a.createElement(m.a,{type:"primary",onClick:function(){return i.handleEditCategory(e)}},"Edit")}},{title:"Delete",dataIndex:"",key:"x",render:function(e){return o.a.createElement(m.a,{type:"danger",onClick:function(){return i.handleDeleteCategory(e)}},"Delete")}}],i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch(C.api_base_url+"listAllCategories",C.method_post).then((function(e){return e.json()})).then((function(t){e.setState({categories_data:t.data,isLoading:!1})})).catch()}},{key:"handleCategoryChange",value:function(e){var t=this;this.setState({category_id:e});var a={method:C.method,headers:C.headers,body:JSON.stringify({category_id:e})};fetch(C.api_base_url+"listAllSubCategories",a).then((function(e){return e.json()})).then((function(e){e.data.push({id:"all",sub_category_name:"All"}),t.setState({sub_categories_data:e.data,is_sub_cat:!0})})).catch()}},{key:"handleSubCategoryChange",value:function(e){var t=this;this.setState({sub_category_id:e}),this.setState({isLoading:!0});var a={method:C.method,headers:C.headers,body:JSON.stringify({sub_category_id:e,all:"all"===e})};fetch(C.api_base_url+"listAllServices",a).then((function(e){return e.json()})).then((function(e){var a=[];e.data.forEach((function(n,i){n.key=n.id,a.push(n),e.data.length===i+1&&t.setState({services_data:a,is_services:!0,isLoading:!1})}))})).catch()}},{key:"handleEditCategory",value:function(e){this.setState({service_id:e.id,service_name:e.service_name,service_description:e.service_description}),this.setViewEditModal(!0)}},{key:"handleDeleteCategory",value:function(e){this.setState({service_id:e.id,service_name:e.service_name,service_description:e.service_description}),this.setViewDeleteModal(!0)}},{key:"setViewEditModal",value:function(e){this.setState({viewEditModal:e})}},{key:"setViewDeleteModal",value:function(e){this.setState({viewDeleteModal:e})}},{key:"setViewAddModal",value:function(e){this.setState({viewAddModal:e})}},{key:"confirmDeleteService",value:function(e){var t=this;this.setViewDeleteModal(!1);var a={method:"DELETE",headers:C.headers,body:JSON.stringify({service_id:e})};fetch(C.api_base_url+"deleteServices",a).then((function(e){return e.json()})).then((function(e){v.b.success("Removed Successfully"),t.setState({isLoading:!0}),t.handleSubCategoryChange(t.state.sub_category_id)})).catch()}},{key:"confirmEditService",value:function(){var e=this;this.setViewEditModal(!1);var t={service_id:this.state.service_id,service_name:this.state.service_name,service_description:this.state.service_description};S.a.put(C.api_base_url+"editServices",t,C.axios_config).then((function(t){t.data.status?(v.b.success(t.data.message),e.setState({isLoading:!0}),e.handleSubCategoryChange(e.state.sub_category_id)):v.b.error(t.data.message)})).catch((function(e){v.b.error("Something went wrong!",e)}))}},{key:"confirmAddService",value:function(){var e=this;this.setViewAddModal(!1);var t={service_name:this.state.new_service_name,service_description:this.state.new_service_description,sub_category_id:this.state.sub_category_id};S.a.post(C.api_base_url+"addServices",t,C.axios_config).then((function(t){t.data.status?(v.b.success(t.data.message),e.setState({isLoading:!0}),e.handleSubCategoryChange(e.state.sub_category_id)):v.b.error(t.data.message)})).catch((function(e){v.b.error("Something went wrong!",e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.categories_data,n=t.sub_categories_data,i=t.services_data,r=t.is_sub_cat,s=t.is_services,c=t.isLoading,l=t.viewEditModal,v=t.viewDeleteModal,b=t.viewAddModal,S=o.a.createElement(E.a,{style:{fontSize:24},spin:!0}),C=this.state,M=C.service_name,D=C.service_description,V=C.service_id,A=C.new_service_name,x=C.new_service_description;return o.a.createElement("div",null,o.a.createElement(h.a,null,o.a.createElement(_.a,{span:24}," ",o.a.createElement("h2",{className:"title gx-mb-4"},"Services")," ")),o.a.createElement(h.a,null,o.a.createElement(_.a,{span:12},o.a.createElement("div",{style:{marginBottom:"3%"}},o.a.createElement(d.a,{defaultValue:"Select Category",onChange:this.handleCategoryChange},a.map((function(e){return o.a.createElement(w,{value:e.id},e.category_name)})))),r?o.a.createElement("div",{style:{marginBottom:"3%"}},o.a.createElement(d.a,{defaultValue:"Select Sub Category",onChange:this.handleSubCategoryChange},n.map((function(e){return o.a.createElement(w,{value:e.id},e.sub_category_name)})))):null),c?o.a.createElement(_.a,{span:24},o.a.createElement(g.a,{indicator:S})):o.a.createElement(o.a.Fragment,null,s?o.a.createElement(_.a,{span:24},o.a.createElement(f.a,{title:"Services"},o.a.createElement(m.a,{type:"primary",onClick:function(){return e.setViewAddModal(!0)}},"Add"),o.a.createElement(y.a,{className:"gx-table-responsive",columns:this.columns,dataSource:i}))):null)),o.a.createElement(p.a,{centered:!0,visible:l,footer:null,header:null,onCancel:function(){return e.setViewEditModal(!1)}},o.a.createElement(h.a,{gutter:16},o.a.createElement(_.a,{span:8},"Name : ",o.a.createElement(u.a,{id:"service_name",size:"large",placeholder:"Service Name",defaultValue:M,onChange:function(t){return e.setState({service_name:t.target.value})}}),o.a.createElement("br",null),o.a.createElement("br",null),"Description : ",o.a.createElement(k,{rows:4,id:"service_description",size:"large",placeholder:"Service Description",value:D,onChange:function(t){return e.setState({service_description:t.target.value})}}))),o.a.createElement("br",null),o.a.createElement("div",{className:"gx-card-list-footer"},o.a.createElement(m.a,{type:"primary",onClick:function(){return e.confirmEditService()}},"Update"),o.a.createElement(m.a,{onClick:function(){return e.setViewEditModal(!1)}},"Cancel"))),o.a.createElement(p.a,{centered:!0,visible:v,footer:null,header:null,onCancel:function(){return e.setViewDeleteModal(!1)}},o.a.createElement("p",{className:"gx-text-grey gx-mb-2"},"Are you sure you want to delete ",M,"?"),o.a.createElement("div",{className:"gx-card-list-footer"},o.a.createElement(m.a,{type:"primary",onClick:function(){return e.confirmDeleteService(V)}},"Yes"),o.a.createElement(m.a,{onClick:function(){return e.setViewDeleteModal(!1)}},"No"))),o.a.createElement(p.a,{centered:!0,visible:b,footer:null,header:null,onCancel:function(){return e.setViewAddModal(!1)}},o.a.createElement(h.a,{gutter:16},o.a.createElement(_.a,{span:8},"Name : ",o.a.createElement(u.a,{size:"large",placeholder:"Service Name",defaultValue:A,onChange:function(t){return e.setState({new_service_name:t.target.value})}}),o.a.createElement("br",null),o.a.createElement("br",null),"Description : ",o.a.createElement(k,{rows:4,size:"large",placeholder:"Service Description",value:x,onChange:function(t){return e.setState({new_service_description:t.target.value})}}))),o.a.createElement("br",null),o.a.createElement("div",{className:"gx-card-list-footer"},o.a.createElement(m.a,{type:"primary",onClick:function(){return e.confirmAddService(V)}},"Update"),o.a.createElement(m.a,{onClick:function(){return e.setViewEditModal(!1)}},"Cancel"))))}}]),a}(o.a.Component);t.default=M}}]);
//# sourceMappingURL=19.aec1242f.chunk.js.map